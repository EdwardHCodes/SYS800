 Emacs style mode select   -*- C++ -*-
 *-----------------------------------------------------------------------------
 *
 *
 *  PrBoom a Doom port merged with LxDoom and LSDLDoom
 *  based on BOOM, a modified and improved DOOM engine
 *  Copyright (C) 1999 by
 *  id Software, Chi Hoang, Lee Killough, Jim Flynn, Rand Phares, Ty Halderman
 *  Copyright (C) 1999-2000 by
 *  Jess Haas, Nicolas Kalkhof, Colin Phipps, Florian Schulze
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License
 *  as published by the Free Software Foundation; either version 2
 *  of the License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 *  02111-1307, USA.
 *
 * DESCRIPTION:
 *      Status bar code.
 *      Does the face/direction indicator animatin.
 *      Does palette indicators as well (red pain/berserk, bright pickup)
 *
 *----------------------------------------------------------------------------- STATUS BAR DATA Palette indices. For damage/bonus red-/gold-shifts Radiation suit, green shift. Location of status bar proff 08/18/98: Changed for high-res#define ST_FX                   143#define ST_FY                   169 Should be set to patch width  for tall numbers later on Number of status faces. proff 08/18/98: Changed for high-res#define ST_FACESX               143#define ST_FACESY               168 Location and size of statistics,  justified according to widget type. Problem is, within which space? STbar? Screen? Note: this could be read in by a lump.       Problem is, is the stuff rendered       into a buffer,       or into the frame buffer? I dunno, why don't you go and find out!!!  killough AMMO number pos. proff 08/18/98: Changed for high-res#define ST_AMMOX                44#define ST_AMMOY                171 HEALTH number pos. proff 08/18/98: Changed for high-res#define ST_HEALTHX              90#define ST_HEALTHY              171 Weapon pos. proff 08/18/98: Changed for high-res#define ST_ARMSX                111#define ST_ARMSY                172#define ST_ARMSBGX              104#define ST_ARMSBGY              168 Frags pos. proff 08/18/98: Changed for high-res#define ST_FRAGSX               138#define ST_FRAGSY               171 ARMOR number pos. proff 08/18/98: Changed for high-res#define ST_ARMORX               221#define ST_ARMORY               171 Key icon positions. proff 08/18/98: Changed for high-res#define ST_KEY0X                239#define ST_KEY0Y                171 proff 08/18/98: Changed for high-res#define ST_KEY1X                239#define ST_KEY1Y                181 proff 08/18/98: Changed for high-res#define ST_KEY2X                239#define ST_KEY2Y                191 Ammunition counter. proff 08/18/98: Changed for high-res#define ST_AMMO0X               288#define ST_AMMO0Y               173 proff 08/18/98: Changed for high-res#define ST_AMMO1X               288#define ST_AMMO1Y               179 proff 08/18/98: Changed for high-res#define ST_AMMO2X               288#define ST_AMMO2Y               191 proff 08/18/98: Changed for high-res#define ST_AMMO3X               288#define ST_AMMO3Y               185 Indicate maximum ammunition. Only needed because backpack exists. proff 08/18/98: Changed for high-res#define ST_MAXAMMO0X            314#define ST_MAXAMMO0Y            173 proff 08/18/98: Changed for high-res#define ST_MAXAMMO1X            314#define ST_MAXAMMO1Y            179 proff 08/18/98: Changed for high-res#define ST_MAXAMMO2X            314#define ST_MAXAMMO2Y            191 proff 08/18/98: Changed for high-res#define ST_MAXAMMO3X            314#define ST_MAXAMMO3Y            185 killough 2/8/98: weapon info position macros UNUSED, removed here main player in game ST_Start() has just been called used to execute ST_Init() only once CPhipps - no longer do direct PLAYPAL handling here used for timing used for making messages go away used when in chat whether in automap or first-person whether left-side main status bar is active whether status bar chat is active value of st_chat before message popped up whether chat window has the cursor on !deathmatch !deathmatch && st_statusbaron !deathmatch main bar left CPhipps - convert to a bitmap 0-9, tall numbers tall % sign 0-9, short, yellow (,different!) numbers 3 key-cards, 3 skulls, 3 card/skull combos jff 2/24/98 extend number of patches by three skull/card combos face status patches face background CPhipps - single background, translated for different players main bar right weapon ownership patches ready-weapon widgetjff 2/16/98 status color change levels ammo percent less than which status is red ammo percent less is yellow more green health amount less than which status is red health amount less than which status is yellow health amount above is blue, below is green armor amount less than which status is red armor amount less than which status is yellow armor amount above is blue, below is green in deathmatch only, summary of frags stats health widget arms background weapon ownership widgets face status widget keycard widgets armor widget ammo widgets max ammo widgets number of frags so far in deathmatch used to use appopriately pained face used for evil grin count until face changes current face index, used by w_faces holds key-type for each key box on bar a random number per tick STATUS BAR CODE killough 3/7/98: make face background change with displayplayer Respond to keyboard input events,  intercept cheats. Filter automap on/off.   else  // if a user keypress...      if (ev->type == ev_keydown)       // Try cheat responder in m_cheat.c         return M_FindCheats(ev->data1); // killough 4/17/98, 5/2/98 This is a not-very-pretty routine which handles  the face states and their timing. the precedence of expressions is:  dead > evil grin > turned head > straight ahead dead picking up bonus evil grin if just picked up weapon being attacked whether right or left whether left or right confusing, aint it? head-on turn face right turn face left getting hurt because of your own damn stupidity rapid firing invulnerability look left or look right if the facecount has timed out killough 2/28/98: traditional status bar keys means "n/a" must redirect the pointer if the ready weapon has changed.  if (w_ready.data != plyr->readyweapon)  {{ static int tic=0; static int dir=-1; if (!(tic&15))   plyr->ammo[weaponinfo[plyr->readyweapon].ammo]+=dir; if (plyr->ammo[weaponinfo[plyr->readyweapon].ammo] == -100)   dir = 1; tic++; } if (*w_ready.on)  STlib_updateNum(&w_ready, true); refresh weapon change  } update keycard multiple widgetsjff 2/24/98 select double keykillough 2/28/98: preserve traditional keys by config option refresh everything if this is him coming back to life used by the w_armsbg widget used by w_arms[] widgets used by w_frags widget killough 3/7/98 get rid of chat window if up because of message slowly fade the berzerk out CPhipps - use new palette function used by w_arms[] widgets used by w_frags widgetjff 2/16/98 make color of ammo depend on amountjff 2/16/98 make color of health depend on amountkillough 2/28/98jff 2/16/98 make color of armor depend on amountkillough 2/28/98 draw status bar background to off-screen buff and refresh all widgets update all widgets cph - let status bar on be controlled
    * completely by the call from D_Display
    * proff - really do it
     Do red-/gold-shifts from damage/items If just after ST_Start(), refresh all  Otherwise, update as little as possible  ST_loadGraphics CPhipps - Loads graphics needed for status bar if doload is true,  unloads them otherwise cph - macro that either acquires a pointer and lock for a lump, or unlocks it. var is referenced exactly once in either case, so ++ in arg works
   #define LOADORFREE(var,name) \
   if (!doload) { W_UnlockLumpName(name); var = NULL; } \
   else var = (const patch_t*)W_CacheLumpName(name)
    Load the numbers, tall and short Load percent key. key cardsjff 2/23/98 show both keys too arms background arms ownership widgets gray # yellow # face backgrounds for different color players killough 3/7/98: add better support for spy mode by loading all player face backgrounds and using displayplayer to choose them: status bar background bits face states turn right turn left ouch! evil grin ;) pissed off killough 3/7/98 ready weapon ammo the last weapon type health percentage arms background weapons owned frags sum faces armor percentage - should be colored later keyboxes 0-2 ammo count (all four kinds) max ammo count (all four kinds) proff 08/18/98: Changed for high-res  d_screens[4] = Z_Malloc(ST_WIDTH*ST_HEIGHT, PU_STATIC, 0); Emacs style mode select   -*- C++ -*-
 *-----------------------------------------------------------------------------
 *
 *
 *  PrBoom a Doom port merged with LxDoom and LSDLDoom
 *  based on BOOM, a modified and improved DOOM engine
 *  Copyright (C) 1999 by
 *  id Software, Chi Hoang, Lee Killough, Jim Flynn, Rand Phares, Ty Halderman
 *  Copyright (C) 1999-2000 by
 *  Jess Haas, Nicolas Kalkhof, Colin Phipps, Florian Schulze
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License
 *  as published by the Free Software Foundation; either version 2
 *  of the License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 *  02111-1307, USA.
 *
 * DESCRIPTION:
 *      Status bar code.
 *      Does the face/direction indicator animatin.
 *      Does palette indicators as well (red pain/berserk, bright pickup)
 *
 *----------------------------------------------------------------------------- STATUS BAR DATA Palette indices. For damage/bonus red-/gold-shifts Radiation suit, green shift. Location of status bar proff 08/18/98: Changed for high-res#define ST_FX                   143#define ST_FY                   169 Should be set to patch width  for tall numbers later on Number of status faces. proff 08/18/98: Changed for high-res#define ST_FACESX               143#define ST_FACESY               168 Location and size of statistics,  justified according to widget type. Problem is, within which space? STbar? Screen? Note: this could be read in by a lump.       Problem is, is the stuff rendered       into a buffer,       or into the frame buffer? I dunno, why don't you go and find out!!!  killough AMMO number pos. proff 08/18/98: Changed for high-res#define ST_AMMOX                44#define ST_AMMOY                171 HEALTH number pos. proff 08/18/98: Changed for high-res#define ST_HEALTHX              90#define ST_HEALTHY              171 Weapon pos. proff 08/18/98: Changed for high-res#define ST_ARMSX                111#define ST_ARMSY                172#define ST_ARMSBGX              104#define ST_ARMSBGY              168 Frags pos. proff 08/18/98: Changed for high-res#define ST_FRAGSX               138#define ST_FRAGSY               171 ARMOR number pos. proff 08/18/98: Changed for high-res#define ST_ARMORX               221#define ST_ARMORY               171 Key icon positions. proff 08/18/98: Changed for high-res#define ST_KEY0X                239#define ST_KEY0Y                171 proff 08/18/98: Changed for high-res#define ST_KEY1X                239#define ST_KEY1Y                181 proff 08/18/98: Changed for high-res#define ST_KEY2X                239#define ST_KEY2Y                191 Ammunition counter. proff 08/18/98: Changed for high-res#define ST_AMMO0X               288#define ST_AMMO0Y               173 proff 08/18/98: Changed for high-res#define ST_AMMO1X               288#define ST_AMMO1Y               179 proff 08/18/98: Changed for high-res#define ST_AMMO2X               288#define ST_AMMO2Y               191 proff 08/18/98: Changed for high-res#define ST_AMMO3X               288#define ST_AMMO3Y               185 Indicate maximum ammunition. Only needed because backpack exists. proff 08/18/98: Changed for high-res#define ST_MAXAMMO0X            314#define ST_MAXAMMO0Y            173 proff 08/18/98: Changed for high-res#define ST_MAXAMMO1X            314#define ST_MAXAMMO1Y            179 proff 08/18/98: Changed for high-res#define ST_MAXAMMO2X            314#define ST_MAXAMMO2Y            191 proff 08/18/98: Changed for high-res#define ST_MAXAMMO3X            314#define ST_MAXAMMO3Y            185 killough 2/8/98: weapon info position macros UNUSED, removed here main player in game ST_Start() has just been called used to execute ST_Init() only once CPhipps - no longer do direct PLAYPAL handling here used for timing used for making messages go away used when in chat whether in automap or first-person whether left-side main status bar is active whether status bar chat is active value of st_chat before message popped up whether chat window has the cursor on !deathmatch !deathmatch && st_statusbaron !deathmatch main bar left CPhipps - convert to a bitmap 0-9, tall numbers tall % sign 0-9, short, yellow (,different!) numbers 3 key-cards, 3 skulls, 3 card/skull combos jff 2/24/98 extend number of patches by three skull/card combos face status patches face background CPhipps - single background, translated for different players main bar right weapon ownership patches ready-weapon widgetjff 2/16/98 status color change levels ammo percent less than which status is red ammo percent less is yellow more green health amount less than which status is red health amount less than which status is yellow health amount above is blue, below is green armor amount less than which status is red armor amount less than which status is yellow armor amount above is blue, below is green in deathmatch only, summary of frags stats health widget arms background weapon ownership widgets face status widget keycard widgets armor widget ammo widgets max ammo widgets number of frags so far in deathmatch used to use appopriately pained face used for evil grin count until face changes current face index, used by w_faces holds key-type for each key box on bar a random number per tick STATUS BAR CODE killough 3/7/98: make face background change with displayplayer Respond to keyboard input events,  intercept cheats. Filter automap on/off.   else  // if a user keypress...      if (ev->type == ev_keydown)       // Try cheat responder in m_cheat.c         return M_FindCheats(ev->data1); // killough 4/17/98, 5/2/98 This is a not-very-pretty routine which handles  the face states and their timing. the precedence of expressions is:  dead > evil grin > turned head > straight ahead dead picking up bonus evil grin if just picked up weapon being attacked whether right or left whether left or right confusing, aint it? head-on turn face right turn face left getting hurt because of your own damn stupidity rapid firing invulnerability look left or look right if the facecount has timed out killough 2/28/98: traditional status bar keys means "n/a" must redirect the pointer if the ready weapon has changed.  if (w_ready.data != plyr->readyweapon)  {{ static int tic=0; static int dir=-1; if (!(tic&15))   plyr->ammo[weaponinfo[plyr->readyweapon].ammo]+=dir; if (plyr->ammo[weaponinfo[plyr->readyweapon].ammo] == -100)   dir = 1; tic++; } if (*w_ready.on)  STlib_updateNum(&w_ready, true); refresh weapon change  } update keycard multiple widgetsjff 2/24/98 select double keykillough 2/28/98: preserve traditional keys by config option refresh everything if this is him coming back to life used by the w_armsbg widget used by w_arms[] widgets used by w_frags widget killough 3/7/98 get rid of chat window if up because of message slowly fade the berzerk out CPhipps - use new palette function used by w_arms[] widgets used by w_frags widgetjff 2/16/98 make color of ammo depend on amountjff 2/16/98 make color of health depend on amountkillough 2/28/98jff 2/16/98 make color of armor depend on amountkillough 2/28/98 draw status bar background to off-screen buff and refresh all widgets update all widgets cph - let status bar on be controlled
    * completely by the call from D_Display
    * proff - really do it
     Do red-/gold-shifts from damage/items If just after ST_Start(), refresh all  Otherwise, update as little as possible  ST_loadGraphics CPhipps - Loads graphics needed for status bar if doload is true,  unloads them otherwise cph - macro that either acquires a pointer and lock for a lump, or unlocks it. var is referenced exactly once in either case, so ++ in arg works
   #define LOADORFREE(var,name) \
   if (!doload) { W_UnlockLumpName(name); var = NULL; } \
   else var = (const patch_t*)W_CacheLumpName(name)
    Load the numbers, tall and short Load percent key. key cardsjff 2/23/98 show both keys too arms background arms ownership widgets gray # yellow # face backgrounds for different color players killough 3/7/98: add better support for spy mode by loading all player face backgrounds and using displayplayer to choose them: status bar background bits face states turn right turn left ouch! evil grin ;) pissed off killough 3/7/98 ready weapon ammo the last weapon type health percentage arms background weapons owned frags sum faces armor percentage - should be colored later keyboxes 0-2 ammo count (all four kinds) max ammo count (all four kinds) proff 08/18/98: Changed for high-res  d_screens[4] = Z_Malloc(ST_WIDTH*ST_HEIGHT, PU_STATIC, 0); Emacs style mode select   -*- C++ -*-
 *-----------------------------------------------------------------------------
 *
 *
 *  PrBoom a Doom port merged with LxDoom and LSDLDoom
 *  based on BOOM, a modified and improved DOOM engine
 *  Copyright (C) 1999 by
 *  id Software, Chi Hoang, Lee Killough, Jim Flynn, Rand Phares, Ty Halderman
 *  Copyright (C) 1999-2000 by
 *  Jess Haas, Nicolas Kalkhof, Colin Phipps, Florian Schulze
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License
 *  as published by the Free Software Foundation; either version 2
 *  of the License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
 *  02111-1307, USA.
 *
 * DESCRIPTION:
 *      Status bar code.
 *      Does the face/direction indicator animatin.
 *      Does palette indicators as well (red pain/berserk, bright pickup)
 *
 *----------------------------------------------------------------------------- STATUS BAR DATA Palette indices. For damage/bonus red-/gold-shifts Radiation suit, green shift. Location of status bar proff 08/18/98: Changed for high-res#define ST_FX                   143#define ST_FY                   169 Should be set to patch width  for tall numbers later on Number of status faces. proff 08/18/98: Changed for high-res#define ST_FACESX               143#define ST_FACESY               168 Location and size of statistics,  justified according to widget type. Problem is, within which space? STbar? Screen? Note: this could be read in by a lump.       Problem is, is the stuff rendered       into a buffer,       or into the frame buffer? I dunno, why don't you go and find out!!!  killough AMMO number pos. proff 08/18/98: Changed for high-res#define ST_AMMOX                44#define ST_AMMOY                171 HEALTH number pos. proff 08/18/98: Changed for high-res#define ST_HEALTHX              90#define ST_HEALTHY              171 Weapon pos. proff 08/18/98: Changed for high-res#define ST_ARMSX                111#define ST_ARMSY                172#define ST_ARMSBGX              104#define ST_ARMSBGY              168 Frags pos. proff 08/18/98: Changed for high-res#define ST_FRAGSX               138#define ST_FRAGSY               171 ARMOR number pos. proff 08/18/98: Changed for high-res#define ST_ARMORX               221#define ST_ARMORY               171 Key icon positions. proff 08/18/98: Changed for high-res#define ST_KEY0X                239#define ST_KEY0Y                171 proff 08/18/98: Changed for high-res#define ST_KEY1X                239#define ST_KEY1Y                181 proff 08/18/98: Changed for high-res#define ST_KEY2X                239#define ST_KEY2Y                191 Ammunition counter. proff 08/18/98: Changed for high-res#define ST_AMMO0X               288#define ST_AMMO0Y               173 proff 08/18/98: Changed for high-res#define ST_AMMO1X               288#define ST_AMMO1Y               179 proff 08/18/98: Changed for high-res#define ST_AMMO2X               288#define ST_AMMO2Y               191 proff 08/18/98: Changed for high-res#define ST_AMMO3X               288#define ST_AMMO3Y               185 Indicate maximum ammunition. Only needed because backpack exists. proff 08/18/98: Changed for high-res#define ST_MAXAMMO0X            314#define ST_MAXAMMO0Y            173 proff 08/18/98: Changed for high-res#define ST_MAXAMMO1X            314#define ST_MAXAMMO1Y            179 proff 08/18/98: Changed for high-res#define ST_MAXAMMO2X            314#define ST_MAXAMMO2Y            191 proff 08/18/98: Changed for high-res#define ST_MAXAMMO3X            314#define ST_MAXAMMO3Y            185 killough 2/8/98: weapon info position macros UNUSED, removed here main player in game ST_Start() has just been called used to execute ST_Init() only once CPhipps - no longer do direct PLAYPAL handling here used for timing used for making messages go away used when in chat whether in automap or first-person whether left-side main status bar is active whether status bar chat is active value of st_chat before message popped up whether chat window has the cursor on !deathmatch !deathmatch && st_statusbaron !deathmatch main bar left CPhipps - convert to a bitmap 0-9, tall numbers tall % sign 0-9, short, yellow (,different!) numbers 3 key-cards, 3 skulls, 3 card/skull combos jff 2/24/98 extend number of patches by three skull/card combos face status patches face background CPhipps - single background, translated for different players main bar right weapon ownership patches ready-weapon widgetjff 2/16/98 status color change levels ammo percent less than which status is red ammo percent less is yellow more green health amount less than which status is red health amount less than which status is yellow health amount above is blue, below is green armor amount less than which status is red armor amount less than which status is yellow armor amount above is blue, below is green in deathmatch only, summary of frags stats health widget arms background weapon ownership widgets face status widget keycard widgets armor widget ammo widgets max ammo widgets number of frags so far in deathmatch used to use appopriately pained face used for evil grin count until face changes current face index, used by w_faces holds key-type for each key box on bar a random number per tick STATUS BAR CODE killough 3/7/98: make face background change with displayplayer Respond to keyboard input events,  intercept cheats. Filter automap on/off.   else  // if a user keypress...      if (ev->type == ev_keydown)       // Try cheat responder in m_cheat.c         return M_FindCheats(ev->data1); // killough 4/17/98, 5/2/98 This is a not-very-pretty routine which handles  the face states and their timing. the precedence of expressions is:  dead > evil grin > turned head > straight ahead dead picking up bonus evil grin if just picked up weapon being attacked whether right or left whether left or right confusing, aint it? head-on turn face right turn face left getting hurt because of your own damn stupidity rapid firing invulnerability look left or look right if the facecount has timed out killough 2/28/98: traditional status bar keys means "n/a" must redirect the pointer if the ready weapon has changed.  if (w_ready.data != plyr->readyweapon)  {{ static int tic=0; static int dir=-1; if (!(tic&15))   plyr->ammo[weaponinfo[plyr->readyweapon].ammo]+=dir; if (plyr->ammo[weaponinfo[plyr->readyweapon].ammo] == -100)   dir = 1; tic++; } if (*w_ready.on)  STlib_updateNum(&w_ready, true); refresh weapon change  } update keycard multiple widgetsjff 2/24/98 select double keykillough 2/28/98: preserve traditional keys by config option refresh everything if this is him coming back to life used by the w_armsbg widget used by w_arms[] widgets used by w_frags widget killough 3/7/98 get rid of chat window if up because of message slowly fade the berzerk out CPhipps - use new palette function used by w_arms[] widgets used by w_frags widgetjff 2/16/98 make color of ammo depend on amountjff 2/16/98 make color of health depend on amountkillough 2/28/98jff 2/16/98 make color of armor depend on amountkillough 2/28/98 draw status bar background to off-screen buff and refresh all widgets update all widgets cph - let status bar on be controlled
    * completely by the call from D_Display
    * proff - really do it
     Do red-/gold-shifts from damage/items If just after ST_Start(), refresh all  Otherwise, update as little as possible  ST_loadGraphics CPhipps - Loads graphics needed for status bar if doload is true,  unloads them otherwise cph - macro that either acquires a pointer and lock for a lump, or unlocks it. var is referenced exactly once in either case, so ++ in arg works
   #define LOADORFREE(var,name) \
   if (!doload) { W_UnlockLumpName(name); var = NULL; } \
   else var = (const patch_t*)W_CacheLumpName(name)
    Load the numbers, tall and short Load percent key. key cardsjff 2/23/98 show both keys too arms background arms ownership widgets gray # yellow # face backgrounds for different color players killough 3/7/98: add better support for spy mode by loading all player face backgrounds and using displayplayer to choose them: status bar background bits face states turn right turn left ouch! evil grin ;) pissed off killough 3/7/98 ready weapon ammo the last weapon type health percentage arms background weapons owned frags sum faces armor percentage - should be colored later keyboxes 0-2 ammo count (all four kinds) max ammo count (all four kinds) proff 08/18/98: Changed for high-res  d_screens[4] = Z_Malloc(ST_WIDTH*ST_HEIGHT, PU_STATIC, 0);